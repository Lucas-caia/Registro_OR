<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Detalhes do Registro</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="detail-container">
  <div class="detail-header">
    <h2>Detalhes do Registro</h2>
    <span id="edit-button">&#9881;</span>
  </div>
  <div id="detail-content">
  </div>
  <button id="back-button">Voltar</button>
</div>

<script>
  function getIdFromUrl() {
    const params = new URLSearchParams(window.location.search);
    return params.get("id");
  }

  function carregarDetalhes() {
    const registros = JSON.parse(localStorage.getItem("registros")) || [];
    const id = getIdFromUrl();

    if (id !== null && registros[id]) {
      const registro = registros[id];
      const detailContent = document.getElementById("detail-content");

      detailContent.innerHTML = `
          <div class="detail-field">
            <span class="detail-label">Nome:</span>
            <span class="detail-value">${registro.nome}</span>
          </div>
          <div class="detail-field">
            <span class="detail-label">Vida Atual / Máxima:</span>
            <span class="detail-value">${registro.vidaAtual} / ${registro.vidaMax}</span>
          </div>
          <div class="detail-field">
            <span class="detail-label">Sanidade Atual / Máxima:</span>
            <span class="detail-value">${registro.sanidadeAtual} / ${registro.sanidadeMax}</span>
          </div>
          <div class="detail-field">
            <span class="detail-label">Esforço Atual / Máximo:</span>
            <span class="detail-value">${registro.esforcoAtual} / ${registro.esforcoMax}</span>
          </div>
          <div class="detail-field">
            <span class="detail-label">PM:</span>
            <span class="detail-value">${registro.pm}</span>
          </div>
          <div class="detail-field">
            <span class="detail-label">Data:</span>
            <span class="detail-value">${registro.data}</span>
          </div>
        `;
    } else {
      document.getElementById("detail-content").innerHTML = `
          <p style="color: #ff4655; font-size: 18px;">Registro não encontrado.</p>
        `;
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    carregarDetalhes();

    const editButton = document.getElementById("edit-button");
    editButton.addEventListener("click", () => {
      const id = getIdFromUrl();
      if (id !== null) {
        window.open(`EditPage.html?id=${id}`, "Editar Registro", "width=600,height=600");
      } else {
        alert("Registro não encontrado para edição!");
      }
    });

    const backButton = document.getElementById("back-button");
    backButton.addEventListener("click", () => {
      if (document.referrer) {
        window.history.back();
      } else {
        window.location.href = "PrincipalPage.html";
      }
    });
  });
</script>
</body>
</html>
